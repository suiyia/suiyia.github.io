<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>菜鸟日常</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://suiyia.github.io/"/>
  <updated>2019-02-18T13:58:14.782Z</updated>
  <id>http://suiyia.github.io/</id>
  
  <author>
    <name>suiyia</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Redis 简单介绍与 Jedis 常用操作</title>
    <link href="http://suiyia.github.io/2019/02/18/Redis%E7%AE%80%E5%8D%95%E4%BB%8B%E7%BB%8D%E4%B8%8EJedis%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C/"/>
    <id>http://suiyia.github.io/2019/02/18/Redis简单介绍与Jedis常用操作/</id>
    <published>2019-02-18T13:02:00.000Z</published>
    <updated>2019-02-18T13:58:14.782Z</updated>
    
    <content type="html"><![CDATA[<h3 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h3><blockquote><p>Redis 是一个开源（BSD许可）的，内存中的数据结构存储系统，它可以用作数据库、缓存和消息中间件。 </p></blockquote><p>主要对 <a href="http://www.redis.cn/" target="_blank" rel="noopener">Redis 中文网</a> 文档内容进行总结，并使用 Jedis 实现一些基本操作。</p><h3 id="使用-Jedis-实现-Redis-基本操作"><a href="#使用-Jedis-实现-Redis-基本操作" class="headerlink" title="使用 Jedis 实现 Redis 基本操作"></a>使用 Jedis 实现 Redis 基本操作</h3><p><a href="https://github.com/xetorthio/jedis" target="_blank" rel="noopener">Jedis</a> 是一个小而精的 Redis 客户端，用 Java 实现</p><ul><li><p>strings 操作</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">String result = jedis.set(<span class="string">"name"</span>,<span class="string">"chx"</span>); <span class="comment">// 添加 String ，result = "OK"</span></span><br><span class="line">result = jedis.mset(<span class="string">"name"</span>, <span class="string">"chenhaoxiang"</span>, <span class="string">"age"</span>, <span class="string">"20"</span>, <span class="string">"email"</span>, <span class="string">"chxpostbox@outlook.com"</span>); <span class="comment">// 同时设置多个键值对 result = "OK"</span></span><br><span class="line">Boolean exists = jedis.exists(<span class="string">"name"</span>); <span class="comment">// 是否存在 key=user 的记录</span></span><br><span class="line">result = jedis.get(<span class="string">"name"</span>); <span class="comment">// 获取数据，result = "chx"</span></span><br><span class="line">Long appendres = jedis.append(<span class="string">"name"</span>, <span class="string">" is my name;"</span>); <span class="comment">// 拼接，appendres = 15，拼接后字符串长度</span></span><br><span class="line">Long delres = jedis.del(<span class="string">"name"</span>);  <span class="comment">//删除某个键值对， delres = 1</span></span><br><span class="line"><span class="comment">//键对应 value 的自增操作，具备原子性，如果键包含错误类型的值或包含无法表示为整数的字符串，则会返回错误。此操作限于64位有符号整数。ERR value is not an integer or out of range</span></span><br><span class="line"><span class="comment">//如果键不存在，则在执行操作之前将其设置为0。如果 age 不存在，操作后 age = 1；</span></span><br><span class="line">Long incrres = jedis.incr(<span class="string">"age"</span>);  <span class="comment">// 用于将键的整数值递增1。 incrres = 21，递增后的值。</span></span><br></pre></td></tr></table></figure></li><li><p>lists 操作</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Long res1 = jedis.lpush(<span class="string">"list"</span>,<span class="string">"1"</span>); <span class="comment">// 头部插入一个元素，res1 = 1</span></span><br><span class="line">res1 = jedis.lpush(<span class="string">"list"</span>,<span class="string">"2"</span>); <span class="comment">// res1 = 2</span></span><br><span class="line">res1 = jedis.lpush(<span class="string">"list"</span>,<span class="string">"3"</span>); <span class="comment">// res1 = 3 返回该 List 的长度</span></span><br><span class="line">jedis.rpush(<span class="string">"list"</span>,<span class="string">"5"</span>); <span class="comment">// 尾部插入元素</span></span><br><span class="line">Long llen = jedis.llen(<span class="string">"list"</span>); <span class="comment">// List 长度，llen = 4</span></span><br><span class="line">List&lt;String&gt; list3 = jedis.lrange(<span class="string">"list"</span>,<span class="number">0</span>,-<span class="number">1</span>); <span class="comment">// list3 = [3,2,1,5] 按范围取出,第一个是key，第二个是起始位置，第三个是结束位置</span></span><br></pre></td></tr></table></figure></li><li><p>sets 操作</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">res1 = jedis.sadd(<span class="string">"set"</span>,<span class="string">"1"</span>);</span><br><span class="line">res1 = jedis.sadd(<span class="string">"set"</span>,<span class="string">"2"</span>);</span><br><span class="line">res1 = jedis.sadd(<span class="string">"set"</span>,<span class="string">"3"</span>); <span class="comment">// 添加</span></span><br><span class="line">Long srem = jedis.srem(<span class="string">"set"</span>,<span class="string">"2"</span>); <span class="comment">// 移除某个元素</span></span><br><span class="line">Set&lt;String&gt; set1 = jedis.smembers(<span class="string">"set"</span>); <span class="comment">// 获取 key=set 的 Set</span></span><br><span class="line">Boolean sismember = jedis.sismember(<span class="string">"set"</span>,<span class="string">"1"</span>); <span class="comment">// key=set 的 Set 中是否存在元素 "1"</span></span><br><span class="line">String srandmember = jedis.srandmember(<span class="string">"set"</span>); <span class="comment">// 随机返回一个 set 元素</span></span><br><span class="line">List&lt;String&gt; list4 = jedis.srandmember(<span class="string">"set"</span>,<span class="number">2</span>); <span class="comment">// 随机返回指定个数个元素</span></span><br><span class="line">Long scar = jedis.scard(<span class="string">"set"</span>); <span class="comment">// set 的元素个数</span></span><br></pre></td></tr></table></figure></li><li><p>sorted sets 操作( TODO 用到再更新)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">jedis.zadd(<span class="string">"zset"</span>,<span class="number">1</span>,<span class="string">"1"</span>);</span><br><span class="line">jedis.zadd(<span class="string">"zset"</span>,<span class="number">2.0</span>,<span class="string">"2"</span>);</span><br><span class="line">jedis.zadd(<span class="string">"zset"</span>,<span class="number">3</span>,<span class="string">"3"</span>);</span><br></pre></td></tr></table></figure></li><li><p>Hashes 操作</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Map&lt;String, String&gt; map = <span class="keyword">new</span> HashMap&lt;String, String&gt;();</span><br><span class="line">map.put(<span class="string">"name"</span>, <span class="string">"chx"</span>);</span><br><span class="line">map.put(<span class="string">"age"</span>, <span class="string">"100"</span>);</span><br><span class="line">map.put(<span class="string">"email"</span>, <span class="string">"***@outlook.com"</span>);</span><br><span class="line">result = jedis.hmset(<span class="string">"user"</span>, map); <span class="comment">// 添加 Map，result = "OK"</span></span><br><span class="line">String res = jedis.hget(<span class="string">"user"</span>,<span class="string">"age"</span>); <span class="comment">// 获取 Map 指定 key 的 value，只能获取单个 key，res = 100</span></span><br><span class="line">List&lt;String&gt; list = jedis.hmget(<span class="string">"user"</span>, <span class="string">"name"</span>, <span class="string">"age"</span>, <span class="string">"email"</span>); <span class="comment">// 获取 Map 指定 key 的 value，同时指定多个 key，list = [chx, 100, ***@outlook.com];</span></span><br><span class="line">Long hdel = jedis.hdel(<span class="string">"user"</span>, <span class="string">"age"</span>); <span class="comment">//删除 map 中的某个键值，hdel = 1</span></span><br><span class="line">Long hlen = jedis.hlen(<span class="string">"user"</span>); <span class="comment">// 获取 map 中的键值对个数，hlen = 2</span></span><br><span class="line">Set&lt;String&gt; set = jedis.hkeys(<span class="string">"user"</span>); <span class="comment">// 返回 map 中的所有 key</span></span><br><span class="line">Iterator&lt;String&gt; iterator = jedis.hkeys(<span class="string">"user"</span>).iterator(); <span class="comment">// 迭代遍历</span></span><br><span class="line"><span class="keyword">while</span> (iterator.hasNext())&#123;</span><br><span class="line">    String key = iterator.next();</span><br><span class="line">    String value = jedis.hmget(<span class="string">"user"</span>,key).get(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line">List&lt;String&gt; list2 = jedis.hvals(<span class="string">"user"</span>); <span class="comment">// 返回 map 中的所有 value</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="Redis-其它名词"><a href="#Redis-其它名词" class="headerlink" title="Redis 其它名词"></a>Redis 其它名词</h3><ul><li><strong>expire 过期</strong></li></ul><p>Redis 允许为每一个 key 设置不同的过期时间，当它们到期时将自动从服务器上删除。</p><p>主动删除：client 主动访问，发现过期，立即删除</p><p>被动删除：Redis <strong>定时随机</strong>选择一些 key 进行检测，删除过期的 key，如果删除比例高于 25%，则继续选择一些 key 进行删除</p><ul><li><strong>管道(Pipelining)</strong></li></ul><p>Redis是一种基于客户端-服务端模型以及请求/响应协议的TCP服务。<br>发送一个命令之后只有等待服务器返回之后才会执行后续命令。</p><p>管道则可以一次发送多条命令而不必立即等待服务器返回，收到命令之后，服务器会以队列形式回复命令，管道操作比较耗内存，要注意命令的大小。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Pipeline pipeline = jedis.pipelined();</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">    pipeline.set(<span class="string">"1"</span>,<span class="string">"1"</span>);</span><br><span class="line">&#125;</span><br><span class="line">pipeline.sync();</span><br></pre></td></tr></table></figure><p><a href="https://blog.csdn.net/freebird_lb/article/details/7778919" target="_blank" rel="noopener">Redis学习笔记7–Redis管道（pipeline）</a></p><p><a href="https://blog.csdn.net/u011489043/article/details/78769428" target="_blank" rel="noopener">分布式缓存Redis之Pipeline（管道）</a></p><ul><li><strong>事务</strong></li></ul><p>将一组 Redis 命令放到事务中执行，MULTI 、 EXEC 、 DISCARD 和 WATCH 是 Redis 事务相关的命令。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">String watch = jedis.watch(<span class="string">"123"</span>);</span><br><span class="line">Transaction multi = jedis.multi();</span><br><span class="line">multi.set(<span class="string">"123"</span>,<span class="string">"123"</span>);</span><br><span class="line">List&lt;Object&gt; list1 = multi.exec();</span><br><span class="line">multi.discard();</span><br><span class="line">jedis.unwatch();</span><br></pre></td></tr></table></figure><p>multi 用于开启一个事务，exec 执行事务，watch 用于监测事务中 key 的变化，如果 key 被其它客户端改过了，那么整个事务会被取消，discard 用于取消事务</p><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>这个总结主要是了解下 Jedis 常用操作。具体细节学习需要文档、项目结合学习。</p><p>博客参考：<br><a href="https://blog.csdn.net/qq_26525215/article/details/60466222" target="_blank" rel="noopener">【Redis】Java中使用Jedis操作Redis(Maven导入包)、创建Redis连接池</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;介绍&quot;&gt;&lt;a href=&quot;#介绍&quot; class=&quot;headerlink&quot; title=&quot;介绍&quot;&gt;&lt;/a&gt;介绍&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;Redis 是一个开源（BSD许可）的，内存中的数据结构存储系统，它可以用作数据库、缓存和消息中间件。 &lt;/p&gt;

      
    
    </summary>
    
      <category term="redis" scheme="http://suiyia.github.io/categories/redis/"/>
    
    
      <category term="redis" scheme="http://suiyia.github.io/tags/redis/"/>
    
  </entry>
  
  <entry>
    <title>展望 2019 ！</title>
    <link href="http://suiyia.github.io/2019/01/02/%E5%B1%95%E6%9C%9B-2019/"/>
    <id>http://suiyia.github.io/2019/01/02/展望-2019/</id>
    <published>2019-01-02T14:28:00.000Z</published>
    <updated>2019-01-02T15:44:08.162Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://mp.weixin.qq.com/s/fZ0MWLYRQOfMBpVDHwq21g" target="_blank" rel="noopener">回首 2018</a>，毕业、入职，名校光环不再，浪潮褪去，原来我一直在裸泳。</p><p>作为已经工作半年的「职场新人」，仍有许多的不足和需要学习的地方。激情是年轻人应该拥有的东西，没有梦想，和咸鱼一样，我不甘心！</p><p>制定好目标，坚持的执行下去，总会有好的结果。</p><ol><li><p>坚持看书，每天花一个小时看书。自己思考、总结，把书中的想法总结出来，提升了思维也锻炼了写作能力。</p></li><li><p>坚持写博客，从公司项目中了解框架，既熟悉了业务，也运用得了框架，这应该是头两年需要技术积累的东西。</p></li><li><p>坚持锻炼，体重控制在 130 斤应该是最完美的体重，向这个目标进军，现在 140 斤。</p></li></ol><p>自己需要注意的地方：</p><ol><li><p>聆听的方式。别人与自己说话，学会聆听，学会体会别人话中表现的含义，不轻易打断别人，有时候还需要委婉地表达自己的想法。</p></li><li><p>注意社交，一个人闷着屋里，并不会造出什么轮子，随时了解外面发生的事，多个周围的同事交流，结交更多的朋友，体会不同人的想法、见解，开拓自己的视野。</p></li></ol><p>唯一愿望：</p><p>找一个可以一起吃饭、一起看电影、一起出去玩的女朋友。</p><p>结语：</p><p>人生就像一场马拉松，起步快的人，往往能提前看到美丽的风景，坚持久的人，必将得到丰厚的硕果，加油 2019 ！</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;https://mp.weixin.qq.com/s/fZ0MWLYRQOfMBpVDHwq21g&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;回首 2018&lt;/a&gt;，毕业、入职，名校光环不再，浪潮褪去，原来我一直在裸泳。&lt;/p&gt;
&lt;p
      
    
    </summary>
    
    
  </entry>
  
</feed>
